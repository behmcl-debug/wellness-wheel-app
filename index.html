<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Wellness Wheel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="text/javascript">
        // This version works entirely in the browser and does not connect to a database.
        // This ensures the wheel is always visible when the file is opened.

        const categories = [
            'Physical',
            'Emotional',
            'Intellectual',
            'Social',
            'Spiritual',
            'Environmental',
            'Financial',
            'Occupational'
        ];
        const categoryColors = [
            '#FCA5A5', '#FDBA74', '#FCD34D', '#A7F3D0', '#A5B4FC', '#C4B5FD', '#94D3A1', '#8EB9D8'
        ];
        
        // Declare variables at the top of the script
        let canvas, ctx, scoreContainer;

        const initialScores = categories.reduce((acc, category) => {
            acc[category] = 5;
            return acc;
        }, {});

        let currentScores = { ...initialScores };

        function initApp() {
            // Initialize variables inside a function that's called after the DOM is ready
            canvas = document.getElementById('wheelCanvas');
            ctx = canvas.getContext('2d');
            scoreContainer = document.getElementById('scoreContainer');
            
            updateUI(currentScores);
            setupEventListeners();
        }

        function setupEventListeners() {
            scoreContainer.addEventListener('input', (e) => {
                if (e.target.tagName === 'INPUT') {
                    const category = e.target.dataset.category;
                    const value = parseInt(e.target.value);
                    if (currentScores[category] !== value) {
                        currentScores[category] = value;
                        drawWheel(currentScores);
                    }
                }
            });

            window.addEventListener('resize', () => {
                drawWheel(currentScores);
            });
        }
        
        // Function to update the UI with scores
        function updateUI(scores) {
            scoreContainer.innerHTML = '';
            categories.forEach(category => {
                const value = scores[category] || 5;
                const container = document.createElement('div');
                container.className = 'flex flex-col items-start w-full';
                container.innerHTML = `
                    <label for="${category}" class="font-semibold text-gray-700 mb-1">${category}: <span id="${category}Value" class="font-normal text-gray-500">${value}</span></label>
                    <input type="range" id="${category}" data-category="${category}" min="1" max="10" value="${value}" class="cursor-pointer w-full h-2 bg-gray-200 rounded-lg appearance-none">
                `;
                scoreContainer.appendChild(container);
                document.getElementById(`${category}Value`).innerText = value;
            });
            drawWheel(scores);
        }

        // Main function to draw the wellness wheel on the canvas
        function drawWheel(scores) {
            const size = Math.min(canvas.offsetWidth, canvas.offsetHeight, 400);
            const centerX = size / 2;
            const centerY = size / 2;
            const radius = size * 0.45;
            const innerRadius = radius * 0.2;

            canvas.width = size;
            canvas.height = size;
            ctx.clearRect(0, 0, size, size);

            // Draw outer gray ring
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
            ctx.fillStyle = '#E5E7EB';
            ctx.fill();
            ctx.closePath();
            
            const totalCategories = categories.length;
            const angleStep = (2 * Math.PI) / totalCategories;

            // Draw each colored segment based on scores
            categories.forEach((category, index) => {
                const score = scores[category] || 5;
                const startAngle = index * angleStep - Math.PI / 2;
                const endAngle = (index + 1) * angleStep - Math.PI / 2;
                const segmentRadius = innerRadius + (radius - innerRadius) * (score / 10);

                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.arc(centerX, centerY, segmentRadius, startAngle, endAngle);
                ctx.closePath();
                ctx.fillStyle = categoryColors[index];
                ctx.fill();
            });
            
            // Draw radial lines and category labels
            categories.forEach((category, index) => {
                const startAngle = index * angleStep - Math.PI / 2;
                const endAngle = (index + 1) * angleStep - Math.PI / 2;
                
                // Draw line
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.lineTo(centerX + radius * Math.cos(startAngle), centerY + radius * Math.sin(startAngle));
                ctx.strokeStyle = '#D1D5DB';
                ctx.lineWidth = 2;
                ctx.stroke();

                // Draw label
                const labelAngle = startAngle + angleStep / 2;
                const labelRadius = radius * 1.1;
                ctx.font = '12px Inter, sans-serif';
                ctx.fillStyle = '#374151';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                const x = centerX + labelRadius * Math.cos(labelAngle);
                const y = centerY + labelRadius * Math.sin(labelAngle);
                ctx.fillText(category, x, y);
            });

            // Draw inner circle
            ctx.beginPath();
            ctx.arc(centerX, centerY, innerRadius, 0, 2 * Math.PI);
            ctx.fillStyle = '#FFFFFF';
            ctx.fill();
            ctx.strokeStyle = '#D1D5DB';
            ctx.lineWidth = 2;
            ctx.stroke();
        }

        // Initialize the application on window load
        window.onload = function() {
            initApp();
        };

    </script>
</head>
<body class="bg-gray-100 font-sans p-4 flex flex-col items-center justify-center min-h-screen">

    <div class="max-w-4xl w-full bg-white rounded-2xl shadow-xl p-8 flex flex-col md:flex-row gap-8 items-center justify-center">

        <!-- Left side: Wellness Wheel -->
        <div class="flex flex-col items-center justify-center md:w-1/2 min-h-[400px]">
            <h1 class="text-3xl font-bold text-gray-800 mb-4">Wellness Wheel</h1>
            <p id="infoText" class="text-sm text-gray-500 mb-4 text-center">Adjust your levels to see your current balance. Your data is not saved with this version.</p>
            <canvas id="wheelCanvas" class="w-full aspect-square"></canvas>
        </div>

        <!-- Right side: Scores and Inputs -->
        <div class="flex flex-col items-start w-full md:w-1/2">
            <div id="scoreContainer" class="w-full flex flex-col gap-4">
                <!-- Sliders will be dynamically populated here -->
            </div>
        </div>
    </div>

</body>
</html>
